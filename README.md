# PinPosi+

ゴルフコースのピン位置決定業務をデジタル化する管理支援アプリケーション。

複数のルールを同時に考慮した最適なピン位置を自動提案し、紙・FAXベースの運用をデジタルで完結させる。

---

## 開発背景

### コース管理という仕事

![主な業務](https://github.com/user-attachments/assets/4096967c-00e3-45a7-904f-f138969197b5)

ゴルフ場のコース管理は、芝刈り・散水・施肥・カップ切り・バンカー均し・配管工事など多岐にわたる。
パッティンググリーンはコースの中で最も重要なエリアであり、その日のカップ位置（ピン位置）を毎朝決定する業務がある。

### ピン位置決定の難しさ

ピン位置を決めるには、複数のルールを同時に満たす必要がある。

- 外周から4yd以上離す
- 過去2日間のピン位置から7yd以上離す
- 急傾斜エリアを避ける
- 芝が傷んでいる箇所を避ける
- 9ホール全体で上段・中段・下段、左・中央・右のバランスを取る

これらを毎朝、頭の中で同時に処理しながら決めている。最終判断は人が行うべきだが、そこに至るまでの工程はプログラムの方が精度が高い。

### 現場の課題

| 課題 | 内容 |
| ---- | ---- |
| 属人化 | 人によって判断ロジックがバラバラ |
| 紙媒体 | 手書き → 清書 → FAXという運用 |
| データ散在 | 過去ピン・禁止エリア等がまとまっていない |
| 情報共有不足 | 傷み箇所の認識が上司とスタッフ間で共有できていない |

勤務していたゴルフ場の平均年齢は50歳（上は75歳）。30代は自分一人だった。人手不足・高齢化が進む中、少ない人数でよりよい運用ができるようにしたいと考え、このアプリを開発した。

---

## このアプリが解決すること

- **属人化** → ルールをシステム化し、誰でも同じ判断ができる
- **紙媒体** → 手書き・FAXを廃止し、デジタルで完結
- **データ散在** → 過去ピン・禁止エリア・傷み情報を一元管理

---

## 業務フロー

### 利用者とデバイス

| 利用者 | デバイス | 利用場所 |
|--------|----------|----------|
| 管理者（グリーンキーパー） | PC | コース管理事務所 |
| 作業スタッフ | タブレット | 現場（グリーン上） |
| マスター室 | PC | マスター室 |

### 従来のフロー

1. グリーン上でピン位置をメモ
2. 事務所に帰って本番用紙に清書
3. 上司が確認・紙の切り貼りによる修正
4. FAXでマスター室へ送信
5. マスター室の人が印刷
6. プレイヤーやキャディーに配布

### アプリ導入後のフロー

1. 管理者が事務所のPCでピン位置を自動提案 → 確認・調整 → スタッフに公開
2. スタッフがタブレットで確認・グリーンの状態に応じて微調整 → 管理者に完了報告
3. 管理者が最終確認、再調整 → マスター室に自動メール送信
4. マスター室の人がPDFで確認、印刷
5. プレイヤーやキャディーに配布

入力から共有まで同一データで行い、再入力・伝達作業を削減する。

![業務フロー](https://github.com/user-attachments/assets/ec35d898-782b-4e67-b497-9f872f3c6029)

---

## 画面遷移図

<!-- TODO: v2のスクショに差し替え -->

---

## 主な機能

### ピン位置自動提案

<!-- TODO: v2のスクショに差し替え -->

条件（雨天・難易度）を設定し、18ホール分のピン位置を一括自動提案。提案後は個別に手動調整が可能。

### セル編集（傷み・禁止・雨天エリア）

<!-- TODO: v2のスクショに差し替え -->

グリーン上のセルをタップして傷みエリア・禁止エリア・雨天禁止エリアを登録。自動提案時にこれらのエリアを回避する。

### PDF出力・送信

<!-- TODO: v2のスクショに差し替え -->

確定したピン位置を既存の紙フォーマットを再現したPDFとして出力し、マスター室にメール送信。

### ナイトモード

<!-- TODO: v2のスクショに差し替え -->

早朝4時から作業する場合に対応。

### スタッフ画面（タブレット）

<!-- TODO: v2のスクショに差し替え -->

管理者が公開したピン位置をタブレットで確認。ホールごとの微調整、完了報告が可能。

---

## 技術スタック

| カテゴリ | 技術 |
| -------- | ---- |
| フロントエンド | Next.js 15 / TypeScript / React 19 |
| バックエンド | Laravel 12 / PHP 8.4 |
| UI | Tailwind CSS v4 / shadcn/ui  |
| グリーン描画 | react-konva |
| データベース | MySQL 8.0（AWS RDS） |
| 認証 | Laravel Sanctum |
| ストレージ | Amazon S3 |
| メール | Amazon SES |
| インフラ | AWS EC2 / Cloudflare |
| 環境構築 | Docker |
| CI/CD | GitHub Actions |
| PDF生成 | jsPDF |

---

## アーキテクチャ図

![アーキテクチャ図](https://github.com/user-attachments/assets/bf27e868-db60-469a-a5c4-f87cd609a27c)

---

## ER図

<!-- TODO: v2のスクショに差し替え -->

---

## こだわったポイント

### シームレスな二画面構成
ページ遷移なしで操作が完結するシームレスな二画面構成を採用。紙で行っていたように、全体を見ながら個別ホールのピン位置を考えられる操作感を再現するため。

### 既存フォーマットの再現
現場で使われていた紙フォーマットを忠実にPDFで再現した。導入時の心理的ハードルを下げるため。

### セルグリッドによるピン位置指定と塗り機能
グリーンを現場で使われている1yd単位のグリッドでセル分割し、セルの塗りで位置を指定する方式を採用。誰が操作しても極力誤差が生じない仕組みにするため。

### 測量なしの傾斜表現
一般的にはこの手のアプリは精密な測量データを元に傾斜を計算するが、傾斜は変化するため定期的な測量が必要になり、導入のハードルが高い。そこで測量なしでも傾斜を扱える設計にした。大きな傾斜は傾斜線、局所的な傾斜は禁止セルで手動指定できるようにした。

### セルエリアと曲線エリアの使い分け
このアプリはレイヤーを重ね合わせることで表現しているが、すべてをセルで表現するとレイヤーが増えた際に画面が煩雑になる。そのため、外周制限エリアや過去ピン制限円は曲線、局所的な傾斜は禁止セルと、情報の性質に応じて表現を使い分けた。

---

## 今後の展望

- 複数ゴルフ場対応
- 9ホール,27ホール,36ホール対応
- ツーグリーン（1ホールに2面のグリーンがあるコース）対応
- PDFフォーマット複数対応（ゴルフ場によってピン位置表のフォーマットが異なるため）
- 練習場パッティンググリーン対応（コースに出る前の練習用パッティンググリーンのピン位置も毎日変更するため）

---

## 補足

MVP版は勤務していたゴルフ場の実際のマップを使用して開発した。セキュリティのため本リポジトリに含まれるマップデータはすべて架空のサンプルデータである。

---

## 作者

**Natsu**

福岡在住 / Web系エンジニアを目指して転職活動中

| 項目 | 内容 |
| ---- | ---- |
| 学習期間 | 9ヶ月（2025年7月〜現在） |
| 総学習時間 | 約1,000時間（うちアプリ開発400時間） |
| 学習形態 | 独学 |
| 前職 | ゴルフ場コース管理（約2年） |

業務中に「この作業、プログラムにやらせた方が効率がいい」と感じていた。「無いんだったら自分で作ろう！」と思い独学でアプリ開発を始めた。大学卒業後はものづくりから離れていたが、開発を進める中で、子どもの頃から感じていたものづくりへの没頭感を再び味わった。朝4時に起きて、昼休憩も帰宅して、退社後も、休日も——合間を縫って開発を続けてきた。課題を見つけ、構造化し、解決策を考え、すぐに形にできる——このサイクルに強く惹かれた。面白い。このワクワクを仕事にしたいと思い、エンジニアへの転職を決意。現在はWeb系エンジニアを目指し転職活動中。
